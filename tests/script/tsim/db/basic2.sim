system sh/stop_dnodes.sh
system sh/deploy.sh -n dnode1 -i 1
system sh/exec.sh -n dnode1 -s start

$loop_cnt = 0
check_dnode_ready:
	$loop_cnt = $loop_cnt + 1
	sleep 200
	if $loop_cnt == 10 then
	  print ====> dnode not ready!
		return -1
	endi
sql show dnodes
print ===> $rows $data00 $data01 $data02 $data03 $data04 $data05
if $data00 != 1 then
  return -1
endi
if $data04 != ready then
  goto check_dnode_ready
endi

sql connect

print =============== create database d1
sql create database d1
sql use d1
sql create table t1 (ts timestamp, i int);
sql create table t2 (ts timestamp, i int);
sql create table t3 (ts timestamp, i int);
sql create table t4 (ts timestamp, i int);

sql show databases
print rows: $rows 
print $data00 $data01 $data02 $data03
print $data10 $data11 $data12 $data13
if $rows != 2 then 
  return -1
endi

if $data00 != d1 then 
  return -1
endi

if $data02 != 2 then  # vgroups 
  return -1
endi

#if $data03 != 4 then  # ntables
#  return -1
#endi

sql show tables
if $rows != 4 then 
  return -1
endi

print =============== create database d2
sql create database d2
sql use d2
sql create table t1 (ts timestamp, i int);
sql create table t2 (ts timestamp, i int);
sql create table t3 (ts timestamp, i int);

sql show databases
if $rows != 3 then 
  return -1
endi

sql show tables
if $rows != 3 then 
  return -1
endi

system sh/exec.sh -n dnode1 -s stop -x SIGINT